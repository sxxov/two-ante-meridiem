<div
  class='x-button variant/{{ variant | default: 'secondary' }}'
  tabindex='0'
>
  <div class='button-blur-lg'></div>
  <div class='button-blur-md'></div>
  <div class='button-blur-sm'></div>
  <div class='button-glow'></div>
  <div class='button-gradient'></div>
  <div class='button-border'></div>
  <div class='button-info'>
    <div class='button-before'>
      {{ before }}
    </div>
    <div class='button-center hb'>
      <span class='button-text'>{{ text }}</span>
      <span class='button-icon'>{{ icon }}</span>
    </div>
    <div class='button-after'>
      {{ after }}
    </div>
  </div>
</div>

{% stylesheet %}
  .x-button {
    position: relative;
    background: transparent;
    border: none;

    transition-property: scale;
    border-radius: 9999px;

    padding-inline: 24px;
    padding-block: 16px;

    overflow: clip;

    &:hover {
      scale: 1.02;
    }
    &:active {
      scale: 0.99;
      transition-duration: 0.1s;
    }

    & .button-blur-lg,
    & .button-blur-md,
    & .button-blur-sm {
      position: absolute;
      inset: 0;
      border-radius: 9999px;

      &.button-blur-lg {
        backdrop-filter: blur(16px);
        mask-image: linear-gradient(to bottom, #fff0 0%, #fff 70%);
      }
      &.button-blur-md {
        backdrop-filter: blur(8px);
        mask-image: linear-gradient(to bottom, #fff0 0%, #fff 50%);
      }
      &.button-blur-sm {
        backdrop-filter: blur(2px);
        mask-image: linear-gradient(to bottom, #fff0 -50%, #fff 10%);
      }
    }

    & .button-glow,
    & .button-gradient {
      position: absolute;
      inset: 0;
      border-radius: 9999px;

      transition-property: filter;
    }

    & .button-border {
      position: absolute;
      inset: 0;
      border-radius: 9999px;
      pointer-events: none;
    }
    &:is(:focus, :focus-visible, :focus-within) .button-border {
      outline: 2px solid currentColor;
      outline-offset: 4px;
    }

    & .button-info {
      position: relative;

      display: grid;
      grid-template-areas: 'before center after';
      grid-template-columns: 1fr auto 1fr;

      & .button.before {
        grid-area: before;

        &:empty {
          display: none;
        }
      }

      & .button-center {
        grid-area: center;
        text-align: center;

        & .button-text {
          &:empty {
            display: none;
          }
        }
        & .button-icon {
          display: inline-block;
          width: 16px;
          height: 16px;

          & svg {
            width: 100%;
            height: 100%;
          }

          &:empty {
            display: none;
          }
        }
      }

      & .button-after {
        grid-area: after;

        &:empty {
          display: none;
        }
      }
    }

    &.variant\/primary {
      color: var(--color-primary-button-text);

      & .button-glow {
        box-shadow: inset 0 -2px 8px 6px color-mix(in oklab, var(--color-primary-button-background), transparent 0%);
      }

      & .button-gradient {
        background: radial-gradient(
          circle at bottom,
          color-mix(in oklab, var(--color-primary-button-background), transparent 0%) 10%,
          transparent 100%
        );
      }

      & .button-border {
        border: 1px solid color-mix(in oklab, var(--color-primary-button-text), transparent 80%);
      }
    }
    &.variant\/secondary {
      color: var(--color-secondary-button-text);

      &:hover .button-glow,
      &:hover .button-gradient {
        filter: brightness(0.95);
      }
      &:active .button-glow,
      &:active .button-gradient {
        filter: brightness(1.1);
        transition-duration: 0.1s;
      }

      & .button-glow {
        box-shadow: inset 0 -2px 8px 6px color-mix(in oklab, var(--color-secondary-button-background), transparent 50%);
      }

      & .button-gradient {
        background: radial-gradient(
          circle at center,
          color-mix(in oklab, var(--color-secondary-button-background), transparent 0%) 0%,
          transparent 75%
        );
      }

      & .button-border {
        border: 1px solid var(--color-secondary-button-text);
      }
    }
  }
{% endstylesheet %}
